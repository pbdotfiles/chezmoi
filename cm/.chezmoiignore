# -----------------------------------------------------------------------------
# LOAD HOST-SPECIFIC FEATURES
# -----------------------------------------------------------------------------
{{- $features := dig .chezmoi.hostname (dict) .hosts_features -}}

# If this machine does NOT need GUI tools:
{{- if not (dig "setup_gui" false $features) }}
**/.ideavimrc
**/.config/autostart
**/.config/flameshot
**/.local/share/applications
**/*setup_obsidian*
**/*setup_brave*
**/*setup_gui_misc*
**/*setup_wine*
**/*setup_printscreen*
**/*cinnamon_fix*
**/*setup_kitty_terminal*
**/.config/kitty
{{- end }}

{{- if not (dig "setup_fonts" false $features) }}
**/*install_fonts*
{{- end }}

# If this machine does NOT need Server utils:
{{- if not (dig "setup_conda" false $features) }}
**/.condarc
**/*setup_miniforge*
{{- end }}

# If this machine does NOT need Server utils:
{{- if not (dig "setup_server" false $features) }}
**/*setup_server*
{{- end }}

# If this machine does NOT need Wireguard:
{{- if not (dig "setup_wireguard" false $features) }}
**/*setup_wireguard*
{{- end }}

# If this machine does NOT need Nvidia drivers:
{{- if not (dig "setup_nvidia" false $features) }}
**/*setup_nvidia*
{{- end }}

# If this machine does NOT need hdidle:
{{- if not (dig "setup_hd_idle" false $features) }}
**/*setup_hd_idle*
{{- end }}

# If this machine does NOT need docker:
{{- if not (dig "setup_docker" false $features) }}
**/*setup_docker*
{{- end }}

# If this machine does NOT need to configure the SMB share:
{{- if not (dig "setup_smb_share" false $features) }}
**/*setup_smb_share*
{{- end }}

# If this machine does NOT need to setup the SMB server
{{- if not (dig "setup_smb_server" false $features) }}
**/*setup_smb_server*
{{- end }}

# If this machine does NOT need to configure the NFS share:
{{- if not (dig "setup_nfs_share" false $features) }}
**/*setup_nfs_share*
{{- end }}

# If this machine does NOT need to setup the NFS server
{{- if not (dig "setup_nfs_server" false $features) }}
**/*setup_nfs_server*
{{- end }}

# If this machine does NOT need to setup the NFS server
{{- if not (dig "setup_syncthing" false $features) }}
**/*setup_syncthing*
{{- end }}

# If this machine does NOT need to do minis-specific setup
{{- if not (dig "setup_minis_specific" false $features) }}
**/.borg/passphrase
**/.minis_crontab**
**/*install_minis_cron**
{{- end }}

# If this machine does NOT have bitwarden:
{{- if not (dig "has_bitwarden" false $features) }}
**/*check_bitwarden*
**/*ssh_copy_id_all*
**/.git-credentials
{{- end }}

# If this machine does NOT run within WSL
{{- if not (dig "runs_within_wsl" false $features) }}
**/*stabilize_wsl*
{{- end }}

# Never ignore those:
# ssh_copy_id_all
# check_bitwarden
# setup_apt_common
# local_storage
# nvim_lazyvim
# setup_starship
